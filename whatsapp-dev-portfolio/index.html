<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Alex Morgan - Full Stack Developer Portfolio. Explore my projects, skills, and experience in modern web development.">
    <title>Alex Morgan | Dev Portfolio - WhatsApp Style</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        /* WhatsApp Background Pattern */
        .bg-whatsapp-doodle {
            background-color: #efeae2;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15 15h10v10H15zM65 65h10v10H65zM35 85h10v10H35z' fill='%23dbead5' fill-opacity='0.4'/%3E%3C/svg%3E");
        }

        /* Message Bubble Tails */
        .message-in::before {
            content: "";
            position: absolute;
            top: 0;
            left: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid white;
            border-left: 8px solid transparent;
        }

        .message-out::before {
            content: "";
            position: absolute;
            top: 0;
            right: -8px;
            width: 0;
            height: 0;
            border-top: 8px solid #d9fdd3;
            border-right: 8px solid transparent;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-msg {
            animation: fadeInUp 0.3s ease-out forwards;
        }

        /* Typing Dot Animation */
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {

            0%,
            80%,
            100% {
                transform: scale(0);
            }

            40% {
                transform: scale(1);
            }
        }

        /* Pulse Animation for Online Status */
        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .pulse-animation {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Device Frame for Desktop */
        @media (min-width: 768px) {
            .device-frame {
                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
                border-radius: 20px;
                overflow: hidden;
                border: 8px solid #1f2937;
            }
        }

        /* Hide scrollbar for options */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Gradient backgrounds */
        .gradient-teal {
            background: linear-gradient(135deg, #008069 0%, #00a884 100%);
        }

        .gradient-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 h-screen w-full flex items-center justify-center font-sans antialiased">

    <!-- Main App Container (Mobile Viewport) -->
    <div class="device-frame relative w-full h-full md:w-[420px] md:h-[820px] bg-whatsapp-doodle flex flex-col">

        <!-- Header -->
        <header class="gradient-teal text-white p-3 flex items-center justify-between shadow-lg z-10 shrink-0">
            <div class="flex items-center gap-3">
                <button class="hover:bg-white/10 p-1.5 rounded-full transition-colors">
                    <i data-lucide="arrow-left" class="w-6 h-6"></i>
                </button>
                <div class="relative">
                    <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=AlexMorgan&backgroundColor=b6e3f4"
                        alt="Profile" class="w-11 h-11 rounded-full bg-gray-200 border-2 border-white/40 shadow-md">
                    <div
                        class="absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-400 rounded-full border-2 border-[#008069] pulse-animation">
                    </div>
                </div>
                <div class="flex flex-col">
                    <h1 class="font-bold text-lg leading-tight">Alex Morgan</h1>
                    <span class="text-xs text-green-100 opacity-90 flex items-center gap-1">
                        <span class="w-2 h-2 bg-green-300 rounded-full"></span>
                        Online
                    </span>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <i data-lucide="video" class="w-6 h-6 cursor-pointer hover:opacity-80 transition-opacity"></i>
                <i data-lucide="phone" class="w-5 h-5 cursor-pointer hover:opacity-80 transition-opacity"></i>
                <i data-lucide="more-vertical" class="w-5 h-5 cursor-pointer hover:opacity-80 transition-opacity"></i>
            </div>
        </header>

        <!-- Chat Area -->
        <div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 pb-24 scroll-smooth">

            <!-- Date Divider -->
            <div class="flex justify-center mb-4">
                <span
                    class="bg-[#e4e9eb] text-gray-600 text-xs px-3 py-1 rounded-lg shadow-sm font-medium uppercase">Today</span>
            </div>

            <!-- Initial System Message (Encryption warning) -->
            <div class="flex justify-center mb-6 px-4">
                <div
                    class="bg-[#fff4cc] text-gray-800 text-[10px] px-3 py-2 rounded-lg text-center shadow-sm max-w-[90%]">
                    <i data-lucide="lock" class="w-3 h-3 inline mr-1 mb-0.5"></i>
                    Messages and calls are end-to-end encrypted. No one outside of this chat can read or listen to them.
                </div>
            </div>

            <!-- Dynamic Messages will be injected here -->

        </div>

        <!-- Floating Options / Input Area -->
        <div class="absolute bottom-0 w-full bg-[#f0f2f5] p-2.5 z-20 shadow-2xl">

            <!-- Quick Reply Chips -->
            <div id="options-container" class="flex gap-2 overflow-x-auto pb-3 px-1 no-scrollbar mb-1">
                <!-- Options injected via JS -->
            </div>

            <!-- Input Bar Visual -->
            <div class="flex items-center gap-2">
                <div class="bg-white flex-1 rounded-full px-4 py-2.5 flex items-center gap-3 shadow-md">
                    <i data-lucide="smile"
                        class="text-gray-400 w-6 h-6 cursor-pointer hover:text-gray-600 transition-colors"></i>
                    <input type="text" placeholder="Select an option above..." disabled
                        class="bg-transparent flex-1 focus:outline-none text-gray-600 cursor-not-allowed text-sm">
                    <i data-lucide="paperclip"
                        class="text-gray-400 w-5 h-5 cursor-pointer hover:text-gray-600 transform -rotate-45 transition-colors"></i>
                    <i data-lucide="camera"
                        class="text-gray-400 w-5 h-5 cursor-pointer hover:text-gray-600 transition-colors"></i>
                </div>
                <div
                    class="bg-[#008069] w-12 h-12 rounded-full flex items-center justify-center shadow-lg cursor-pointer active:scale-95 transition-transform hover:bg-[#00a884]">
                    <i data-lucide="mic" class="text-white w-6 h-6"></i>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Initialize Icons
        lucide.createIcons();

        // --- Configuration & Data ---
        const chatContainer = document.getElementById('chat-container');
        const optionsContainer = document.getElementById('options-container');

        const portfolioData = {
            intro: {
                text: "Hi there! üëã I'm Alex Morgan, a Full Stack Developer with 5+ years of experience. Thanks for dropping by my portfolio. What would you like to explore?",
                options: [
                    { label: "üë®‚Äçüíª About Me", next: "about" },
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "üõ† Tech Stack", next: "skills" },
                    { label: "üíº Experience", next: "experience" },
                    { label: "‚≠ê Testimonials", next: "testimonials" },
                    { label: "üìö More", next: "more" }
                ]
            },
            about: {
                messages: [
                    { type: 'text', content: "I'm a passionate Full Stack Developer who loves building scalable, user-centric web applications. üöÄ" },
                    { type: 'text', content: "I specialize in React, Node.js, and Cloud Architecture. My focus is on creating performant, accessible, and pixel-perfect experiences." },
                    {
                        type: 'stats', stats: [
                            { label: "Years Experience", value: "5+" },
                            { label: "Projects Completed", value: "50+" },
                            { label: "Happy Clients", value: "30+" },
                            { label: "GitHub Stars", value: "2.5K+" }
                        ]
                    }
                ],
                options: [
                    { label: "üöÄ View Projects", next: "projects" },
                    { label: "üíº Experience", next: "experience" },
                    { label: "üõ† Tech Stack", next: "skills" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            skills: {
                messages: [
                    { type: 'text', content: "Here's my technical arsenal üõ†Ô∏è" },
                    { type: 'image', content: 'https://skillicons.dev/icons?i=js,ts,react,next,tailwind,nodejs,express,mongodb,postgres,docker,aws,git&perline=4', caption: "Frontend, Backend & DevOps" },
                    { type: 'text', content: "I'm also proficient in: GraphQL, Redis, Kubernetes, CI/CD, Jest, Cypress, and more!" }
                ],
                options: [
                    { label: "üöÄ See Projects", next: "projects" },
                    { label: "üéì Certifications", next: "certifications" },
                    { label: "üë®‚Äçüíª About Me", next: "about" }
                ]
            },
            projects: {
                messages: [
                    { type: 'text', content: "Here are some highlights from my recent work üéØ" },
                    {
                        type: 'project',
                        title: "E-Commerce Platform",
                        desc: "Next.js + Stripe + PostgreSQL",
                        link: "#",
                        img: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=400",
                        tags: ["Next.js", "Stripe", "PostgreSQL"]
                    },
                    {
                        type: 'project',
                        title: "AI Chat Application",
                        desc: "React + Socket.io + OpenAI",
                        link: "#",
                        img: "https://images.unsplash.com/photo-1587560699334-cc4da63c2409?auto=format&fit=crop&q=80&w=400",
                        tags: ["React", "AI", "WebSocket"]
                    },
                    {
                        type: 'project',
                        title: "Task Management SaaS",
                        desc: "MERN Stack + Real-time Collaboration",
                        link: "#",
                        img: "https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?auto=format&fit=crop&q=80&w=400",
                        tags: ["MongoDB", "Express", "React"]
                    }
                ],
                options: [
                    { label: "üíº Experience", next: "experience" },
                    { label: "‚≠ê Testimonials", next: "testimonials" },
                    { label: "üìÑ Resume", next: "resume" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            experience: {
                messages: [
                    { type: 'text', content: "My professional journey üíº" },
                    {
                        type: 'timeline',
                        items: [
                            {
                                period: "2023 - Present",
                                role: "Senior Full Stack Developer",
                                company: "TechCorp Inc.",
                                description: "Leading development of microservices architecture serving 2M+ users"
                            },
                            {
                                period: "2021 - 2023",
                                role: "Full Stack Developer",
                                company: "StartupXYZ",
                                description: "Built scalable e-commerce platform from scratch"
                            },
                            {
                                period: "2020 - 2021",
                                role: "Frontend Developer",
                                company: "WebAgency Pro",
                                description: "Developed responsive web applications using React"
                            }
                        ]
                    }
                ],
                options: [
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "‚≠ê Testimonials", next: "testimonials" },
                    { label: "üìÑ Resume", next: "resume" }
                ]
            },
            testimonials: {
                messages: [
                    { type: 'text', content: "What clients say about my work ‚≠ê" },
                    {
                        type: 'testimonial',
                        name: "Sarah Johnson",
                        role: "CTO at TechStart",
                        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah",
                        text: "Alex is an exceptional developer. His attention to detail and problem-solving skills are outstanding!",
                        rating: 5
                    },
                    {
                        type: 'testimonial',
                        name: "Michael Chen",
                        role: "Product Manager",
                        avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=Michael",
                        text: "Working with Alex was a pleasure. He delivered high-quality code ahead of schedule.",
                        rating: 5
                    }
                ],
                options: [
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "üíº Experience", next: "experience" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            certifications: {
                messages: [
                    { type: 'text', content: "My certifications & achievements üéì" },
                    {
                        type: 'certificate',
                        title: "AWS Certified Solutions Architect",
                        issuer: "Amazon Web Services",
                        date: "2023",
                        icon: "award"
                    },
                    {
                        type: 'certificate',
                        title: "Meta Front-End Developer",
                        issuer: "Meta (Facebook)",
                        date: "2022",
                        icon: "award"
                    },
                    {
                        type: 'certificate',
                        title: "Google Cloud Professional",
                        issuer: "Google Cloud",
                        date: "2022",
                        icon: "award"
                    }
                ],
                options: [
                    { label: "üõ† Tech Stack", next: "skills" },
                    { label: "üíº Experience", next: "experience" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            blog: {
                messages: [
                    { type: 'text', content: "Latest from my blog üìù" },
                    {
                        type: 'blog',
                        title: "Building Scalable React Applications",
                        excerpt: "Best practices for structuring large-scale React apps...",
                        date: "Nov 2024",
                        readTime: "5 min read",
                        link: "#"
                    },
                    {
                        type: 'blog',
                        title: "Microservices with Node.js",
                        excerpt: "A comprehensive guide to building microservices architecture...",
                        date: "Oct 2024",
                        readTime: "8 min read",
                        link: "#"
                    }
                ],
                options: [
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            services: {
                messages: [
                    { type: 'text', content: "Services I offer üíº" },
                    {
                        type: 'service',
                        title: "Web Development",
                        description: "Full-stack web applications with modern technologies",
                        icon: "code"
                    },
                    {
                        type: 'service',
                        title: "API Development",
                        description: "RESTful & GraphQL APIs with scalable architecture",
                        icon: "server"
                    },
                    {
                        type: 'service',
                        title: "Cloud Solutions",
                        description: "AWS, GCP deployment & DevOps automation",
                        icon: "cloud"
                    },
                    {
                        type: 'service',
                        title: "Consulting",
                        description: "Technical consulting & code reviews",
                        icon: "users"
                    }
                ],
                options: [
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            more: {
                text: "What else would you like to know?",
                options: [
                    { label: "üéì Certifications", next: "certifications" },
                    { label: "üìù Blog", next: "blog" },
                    { label: "üíº Services", next: "services" },
                    { label: "üìÑ Resume", next: "resume" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            resume: {
                messages: [
                    { type: 'text', content: "Download my complete resume üìÑ" },
                    { type: 'file', filename: "Alex_Morgan_Resume.pdf", size: "1.2 MB" },
                    { type: 'text', content: "You can also view my profiles:" },
                    { type: 'link', content: "github.com/alexmorgan", icon: "github", url: "https://github.com" },
                    { type: 'link', content: "linkedin.com/in/alexmorgan", icon: "linkedin", url: "https://linkedin.com" }
                ],
                options: [
                    { label: "üöÄ Projects", next: "projects" },
                    { label: "üìû Contact", next: "contact" }
                ]
            },
            contact: {
                messages: [
                    { type: 'text', content: "Let's build something amazing together! üöÄ" },
                    { type: 'text', content: "You can reach me through:" },
                    { type: 'link', content: "alex.morgan@example.com", icon: "mail", url: "mailto:alex.morgan@example.com" },
                    { type: 'link', content: "github.com/alexmorgan", icon: "github", url: "https://github.com" },
                    { type: 'link', content: "linkedin.com/in/alexmorgan", icon: "linkedin", url: "https://linkedin.com" },
                    { type: 'link', content: "@alexmorgan_dev", icon: "twitter", url: "https://twitter.com" },
                    { type: 'text', content: "I typically respond within 24 hours! ‚ö°" }
                ],
                options: [
                    { label: "üëã Start Over", next: "intro" },
                    { label: "üöÄ View Projects", next: "projects" }
                ]
            }
        };

        // --- State Management ---
        let isTyping = false;

        // --- Helper Functions ---

        // Get Current Time
        const getCurrentTime = () => {
            const now = new Date();
            return now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        };

        // Create HTML for a Message Bubble
        const createMessageElement = (data, isSender = false) => {
            const div = document.createElement('div');
            const alignment = isSender ? 'justify-end' : 'justify-start';
            const bgClass = isSender ? 'bg-[#d9fdd3]' : 'bg-white';
            const tailClass = isSender ? 'message-out' : 'message-in';
            const tickHtml = isSender ? `<span class="ml-1"><i data-lucide="check-check" class="w-3 h-3 text-blue-500 inline"></i></span>` : '';

            div.className = `flex ${alignment} animate-msg mb-2 relative`;

            let contentHtml = '';

            if (data.type === 'text') {
                contentHtml = `<p class="text-sm text-gray-800 leading-relaxed">${data.content}</p>`;
            } else if (data.type === 'image') {
                contentHtml = `
                    <div class="mb-1 rounded-lg overflow-hidden bg-gray-100">
                        <img src="${data.content}" alt="Attachment" class="max-w-full h-auto object-cover">
                    </div>
                    ${data.caption ? `<p class="text-sm text-gray-800 mt-1">${data.caption}</p>` : ''}
                `;
            } else if (data.type === 'stats') {
                contentHtml = `
                    <div class="grid grid-cols-2 gap-2 w-full">
                        ${data.stats.map(stat => `
                            <div class="bg-gradient-to-br from-teal-50 to-cyan-50 p-3 rounded-lg text-center border border-teal-100">
                                <div class="text-xl font-bold text-[#008069]">${stat.value}</div>
                                <div class="text-[10px] text-gray-600 mt-1">${stat.label}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (data.type === 'timeline') {
                contentHtml = `
                    <div class="space-y-3 w-full">
                        ${data.items.map((item, index) => `
                            <div class="border-l-2 border-[#008069] pl-3 pb-2">
                                <div class="text-[10px] text-[#008069] font-semibold mb-1">${item.period}</div>
                                <div class="text-sm font-bold text-gray-900">${item.role}</div>
                                <div class="text-xs text-gray-600 mb-1">${item.company}</div>
                                <div class="text-xs text-gray-700">${item.description}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else if (data.type === 'testimonial') {
                const stars = '‚≠ê'.repeat(data.rating);
                contentHtml = `
                    <div class="w-full">
                        <div class="flex items-center gap-2 mb-2">
                            <img src="${data.avatar}" class="w-10 h-10 rounded-full border-2 border-gray-200">
                            <div>
                                <div class="text-sm font-bold text-gray-900">${data.name}</div>
                                <div class="text-[10px] text-gray-600">${data.role}</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-700 italic mb-2">"${data.text}"</p>
                        <div class="text-xs">${stars}</div>
                    </div>
                `;
            } else if (data.type === 'certificate') {
                contentHtml = `
                    <div class="flex items-start gap-3 w-full bg-gradient-to-r from-amber-50 to-yellow-50 p-3 rounded-lg border border-amber-200">
                        <div class="bg-amber-500 p-2 rounded-full">
                            <i data-lucide="${data.icon}" class="w-5 h-5 text-white"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm font-bold text-gray-900">${data.title}</div>
                            <div class="text-xs text-gray-600">${data.issuer}</div>
                            <div class="text-[10px] text-gray-500 mt-1">${data.date}</div>
                        </div>
                    </div>
                `;
            } else if (data.type === 'blog') {
                contentHtml = `
                    <div class="w-full bg-gradient-to-br from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-200">
                        <div class="text-sm font-bold text-gray-900 mb-1">${data.title}</div>
                        <p class="text-xs text-gray-700 mb-2">${data.excerpt}</p>
                        <div class="flex items-center justify-between text-[10px] text-gray-500">
                            <span>${data.date}</span>
                            <span>${data.readTime}</span>
                        </div>
                        <a href="${data.link}" class="block mt-2 text-center bg-blue-500 text-white text-xs py-1.5 rounded hover:bg-blue-600 transition">Read More</a>
                    </div>
                `;
            } else if (data.type === 'service') {
                contentHtml = `
                    <div class="flex items-start gap-3 w-full bg-gradient-to-br from-purple-50 to-pink-50 p-3 rounded-lg border border-purple-200">
                        <div class="bg-purple-500 p-2 rounded-lg">
                            <i data-lucide="${data.icon}" class="w-5 h-5 text-white"></i>
                        </div>
                        <div class="flex-1">
                            <div class="text-sm font-bold text-gray-900">${data.title}</div>
                            <div class="text-xs text-gray-700 mt-1">${data.description}</div>
                        </div>
                    </div>
                `;
            } else if (data.type === 'project') {
                contentHtml = `
                    <div class="w-full max-w-[240px]">
                        <div class="relative h-28 mb-2 rounded-lg overflow-hidden shadow-md">
                             <img src="${data.img}" class="w-full h-full object-cover">
                        </div>
                        <h3 class="font-bold text-gray-900 text-sm mb-1">${data.title}</h3>
                        <p class="text-xs text-gray-600 mb-2">${data.desc}</p>
                        ${data.tags ? `
                            <div class="flex flex-wrap gap-1 mb-2">
                                ${data.tags.map(tag => `<span class="text-[9px] bg-teal-100 text-teal-700 px-2 py-0.5 rounded-full">${tag}</span>`).join('')}
                            </div>
                        ` : ''}
                        <a href="${data.link}" target="_blank" class="block text-center w-full bg-[#008069] text-white text-xs py-2 rounded-lg uppercase font-bold hover:bg-[#00a884] transition shadow-md">View Project</a>
                    </div>
                `;
            } else if (data.type === 'file') {
                contentHtml = `
                    <div class="flex items-center gap-3 bg-gradient-to-r from-red-50 to-orange-50 p-3 rounded-lg cursor-pointer hover:from-red-100 hover:to-orange-100 transition border border-red-200">
                        <div class="bg-red-500 p-2.5 rounded-lg text-white shadow-md">
                            <i data-lucide="file-text" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="text-sm font-bold text-gray-800">${data.filename}</p>
                            <p class="text-[10px] text-gray-600">${data.size} ‚Ä¢ PDF</p>
                        </div>
                        <i data-lucide="download" class="w-4 h-4 text-gray-600 ml-auto"></i>
                    </div>
                `;
            } else if (data.type === 'link') {
                contentHtml = `
                    <a href="${data.url || '#'}" target="_blank" class="flex items-center gap-2 text-blue-600 hover:text-blue-700 hover:underline transition">
                        <i data-lucide="${data.icon || 'link'}" class="w-4 h-4"></i>
                        <span class="text-sm">${data.content}</span>
                    </a>
                `;
            }

            div.innerHTML = `
                <div class="${bgClass} text-black rounded-lg p-3 shadow-md max-w-[85%] relative ${tailClass} text-left">
                    ${contentHtml}
                    <div class="flex justify-end items-center mt-1.5 space-x-1">
                        <span class="text-[10px] text-gray-500 min-w-[30px] text-right">${getCurrentTime()}</span>
                        ${tickHtml}
                    </div>
                </div>
            `;
            return div;
        };

        // Show Typing Indicator
        const showTypingIndicator = () => {
            const div = document.createElement('div');
            div.id = 'typing-indicator';
            div.className = `flex justify-start animate-msg mb-2 relative`;
            div.innerHTML = `
                <div class="bg-white rounded-lg p-3 shadow-md message-in relative">
                    <div class="flex gap-1">
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                        <div class="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                    </div>
                </div>
            `;
            chatContainer.appendChild(div);
            scrollToBottom();
        };

        const removeTypingIndicator = () => {
            const el = document.getElementById('typing-indicator');
            if (el) el.remove();
        };

        // Scroll to bottom
        const scrollToBottom = () => {
            chatContainer.scrollTop = chatContainer.scrollHeight;
        };

        // Render Options (Chips)
        const renderOptions = (options) => {
            optionsContainer.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = `whitespace-nowrap bg-white border-2 border-[#008069] text-[#008069] text-sm font-semibold px-4 py-2 rounded-full shadow-md hover:bg-[#008069] hover:text-white active:scale-95 transition-all`;
                btn.textContent = opt.label;
                btn.onclick = () => handleUserSelection(opt.label, opt.next);
                optionsContainer.appendChild(btn);
            });
            optionsContainer.scrollLeft = 0;
        };

        // Handle User Interaction
        const handleUserSelection = async (text, nextFlowKey) => {
            if (isTyping) return;

            // 1. Clear options
            optionsContainer.innerHTML = '';

            // 2. Add User Message
            const userMsgHtml = { type: 'text', content: text };
            chatContainer.appendChild(createMessageElement(userMsgHtml, true));
            lucide.createIcons();
            scrollToBottom();

            // 3. Trigger Bot Response
            const flow = portfolioData[nextFlowKey];
            if (flow) {
                isTyping = true;

                // If there's a text property, show it first
                if (flow.text) {
                    showTypingIndicator();
                    await new Promise(r => setTimeout(r, 800 + Math.random() * 400));
                    removeTypingIndicator();
                    chatContainer.appendChild(createMessageElement({ type: 'text', content: flow.text }, false));
                    lucide.createIcons();
                    scrollToBottom();
                }

                // If it's an array of messages, loop through them
                const messages = flow.messages || [];

                for (const msg of messages) {
                    showTypingIndicator();
                    await new Promise(r => setTimeout(r, 800 + Math.random() * 500));
                    removeTypingIndicator();

                    chatContainer.appendChild(createMessageElement(msg, false));
                    lucide.createIcons();
                    scrollToBottom();
                }

                // 4. Show new options
                if (flow.options) {
                    renderOptions(flow.options);
                }
                isTyping = false;
            }
        };

        // --- Initialization ---
        const init = async () => {
            await new Promise(r => setTimeout(r, 500));

            showTypingIndicator();
            await new Promise(r => setTimeout(r, 1200));
            removeTypingIndicator();

            chatContainer.appendChild(createMessageElement({ type: 'text', content: portfolioData.intro.text }, false));
            lucide.createIcons();
            renderOptions(portfolioData.intro.options);
            scrollToBottom();
        };

        init();

    </script>
</body>

</html>